/*!
 * gqui.js v1.0.0 (undefined)
 * Copyright 2019, guanqing
 * MIT license
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.gqui=t():e.gqui=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o);t["default"]={uploader:a["default"]},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){function n(e,t){var n=e.find('[data-id="'+t+'"]'),r=n.find(".weui-uploader__file-content");return r.length||(r=(0,i["default"])('<div class="weui-uploader__file-content"></div>'),n.append(r)),n.addClass("weui-uploader__file_status"),r}function r(e,t){var n=e.find('[data-id="'+t+'"]').removeClass("weui-uploader__file_status");n.find(".weui-uploader__file-content").remove()}function o(e){e.url=u.createObjectURL(e),e.status="ready",e.upload=function(){(0,c["default"])(i["default"].extend({$uploader:a,file:e},t))},e.stop=function(){this.xhr.abort()},t.onQueued(e),t.auto&&e.upload()}var a=(0,i["default"])(e),u=window.URL||window.webkitURL||window.mozURL;if(t=i["default"].extend({url:"",auto:!0,type:"file",fileVal:"file",xhrFields:{},onBeforeQueued:i["default"].noop,onQueued:i["default"].noop,onBeforeSend:i["default"].noop,onSuccess:i["default"].noop,onProgress:i["default"].noop,onError:i["default"].noop},t),t.compress!==!1&&(t.compress=i["default"].extend({width:1600,height:1600,quality:.8},t.compress)),t.onBeforeQueued){var l=t.onBeforeQueued;t.onBeforeQueued=function(e,t){var n=l.call(e,t);if(n===!1)return!1;if(n!==!0){var r=(0,i["default"])(i["default"].render(s["default"],{id:e.id}));a.find(".weui-uploader__files").append(r)}}}if(t.onQueued){var p=t.onQueued;t.onQueued=function(e){if(!p.call(e)){var n=a.find('[data-id="'+e.id+'"]');n.css({backgroundImage:'url("'+(e.base64||e.url)+'")'}),t.auto||r(a,e.id)}}}if(t.onBeforeSend){var h=t.onBeforeSend;t.onBeforeSend=function(e,t,n){var r=h.call(e,t,n);if(r===!1)return!1}}if(t.onSuccess){var v=t.onSuccess;t.onSuccess=function(e,t){e.status="success",v.call(e,t)||r(a,e.id)}}if(t.onProgress){var y=t.onProgress;t.onProgress=function(e,t){y.call(e,t)||n(a,e.id).html(t+"%")}}if(t.onError){var g=t.onError;t.onError=function(e,t){e.status="fail",g.call(e,t)||n(a,e.id).html('<i class="weui-icon-warn"></i>')}}a.find('input[type="file"]').on("change",function(e){var n=e.target.files;0!==n.length&&(t.compress===!1&&"file"==t.type?Array.prototype.forEach.call(n,function(e){e.id=++d,t.onBeforeQueued(e,n)!==!1&&o(e)}):Array.prototype.forEach.call(n,function(e){e.id=++d,t.onBeforeQueued(e,n)!==!1&&(0,f.compress)(e,t,function(e){e&&o(e)})}),this.value="")})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=r(a),u=n(6),s=r(u),f=n(7),l=n(8),c=r(l),d=0;t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=this.os={},n=e.match(/(Android);?[\s\/]+([\d.]+)?/);n&&(t.android=!0,t.version=n[2])}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(3);var i=n(4),u=r(i),s=n(5),f=r(s);o.call(f["default"],navigator.userAgent),(0,u["default"])(f["default"].fn,{append:function(e){return e instanceof HTMLElement||(e=e[0]),this.forEach(function(t){t.appendChild(e)}),this},remove:function(){return this.forEach(function(e){e.parentNode.removeChild(e)}),this},find:function(e){return(0,f["default"])(e,this)},addClass:function(e){return this.forEach(function(t){t.classList.add(e)}),this},removeClass:function(e){return this.forEach(function(t){t.classList.remove(e)}),this},eq:function(e){return(0,f["default"])(this[e])},show:function(){return this.forEach(function(e){e.style.display="block"}),this},hide:function(){return this.forEach(function(e){e.style.display="none"}),this},html:function(e){return this.forEach(function(t){t.innerHTML=e}),this},css:function(e){var t=this;return Object.keys(e).forEach(function(n){t.forEach(function(t){t.style[n]=e[n]})}),this},on:function(e,t,n){var r="string"==typeof t&&"function"==typeof n;return r||(n=t),this.forEach(function(o){e.split(" ").forEach(function(e){o.addEventListener(e,function(e){r?this.contains(e.target.closest(t))&&n.call(e.target,e):n.call(this,e)})})}),this},off:function(e,t,n){return"function"==typeof t&&(n=t,t=null),this.forEach(function(r){e.split(" ").forEach(function(e){"string"==typeof t?r.querySelectorAll(t).forEach(function(t){t.removeEventListener(e,n)}):r.removeEventListener(e,n)})}),this},index:function(){var e=this[0],t=e.parentNode;return Array.prototype.indexOf.call(t.children,e)},offAll:function(){var e=this;return this.forEach(function(t,n){var r=t.cloneNode(!0);t.parentNode.replaceChild(r,t),e[n]=r}),this},val:function(){var e=arguments;return arguments.length?(this.forEach(function(t){t.value=e[0]}),this):this[0].value},attr:function(){var e=arguments;if("object"==a(arguments[0])){var t=arguments[0],n=this;return Object.keys(t).forEach(function(e){n.forEach(function(n){n.setAttribute(e,t[e])})}),this}return"string"==typeof arguments[0]&&arguments.length<2?this[0].getAttribute(arguments[0]):(this.forEach(function(t){t.setAttribute(e[0],e[1])}),this)}}),(0,u["default"])(f["default"],{extend:u["default"],noop:function(){},render:function(e,t){var n="var p=[];with(this){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');";return new Function(n).apply(t)},getStyle:function(e,t){var n,r=(e.ownerDocument||document).defaultView;return r&&r.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),r.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[t],/^\d+(em|pt|%|ex)?$/i.test(n)?function(t){var n=e.style.left,r=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=n,e.runtimeStyle.left=r,t}(n):n):void 0}}),t["default"]=f["default"],e.exports=t["default"]},function(e,t){function n(e){var t=e.Element.prototype;"function"!=typeof t.matches&&(t.matches=t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),r=0;n[r]&&n[r]!==t;)++r;return Boolean(n[r])}),"function"!=typeof t.closest&&(t.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}e.exports=n},function(e,t){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(a){return!1}}var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,u,s=n(e),f=1;f<arguments.length;f++){r=Object(arguments[f]);for(var l in r)a.call(r,l)&&(s[l]=r[l]);if(o){u=o(r);for(var c=0;c<u.length;c++)i.call(r,u[c])&&(s[u[c]]=r[u[c]])}}return s}},function(e,t,n){var r,o;!function(n,a){var a=function(e,t,n){function r(o,a,i){return i=Object.create(r.fn),o&&i.push.apply(i,o[t]?[o]:""+o===o?/</.test(o)?((a=e.createElement(a)).innerHTML=o,a.children):a?(a=r(a)[0])?a[n](o):i:e[n](o):o),i}return r.fn=[],r.one=function(e,t){return r(e,t)[0]||null},r}(document,"addEventListener","querySelectorAll");r=[],o=function(){return a}.apply(t,r),!(void 0!==o&&(e.exports=o))}(this)},function(e,t){e.exports='<li class="weui-uploader__file weui-uploader__file_status" data-id="<%= id %>"> <div class=weui-uploader__delete data-did="<%= id %>">x</div> <div class=weui-uploader__file-content> <i class=weui-loading style=width:30px;height:30px></i> </div> </li> '},function(e,t){"use strict";function n(e){var t,n=e.naturalHeight,r=document.createElement("canvas");r.width=1,r.height=n;var o=r.getContext("2d");o.drawImage(e,0,0);try{t=o.getImageData(0,0,1,n).data}catch(a){return 1}for(var i=0,u=n,s=n;s>i;){var f=t[4*(s-1)+3];0===f?u=s:i=s,s=u+i>>1}var l=s/n;return 0===l?1:l}function r(e){for(var t=atob(e.split(",")[1]),n=new ArrayBuffer(t.length),r=new Uint8Array(n),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return n}function o(e){var t=e.split(",")[0].split(":")[1].split(";")[0],n=r(e);return new Blob([n],{type:t})}function a(e){var t=new DataView(e);if(65496!=t.getUint16(0,!1))return-2;for(var n=t.byteLength,r=2;r<n;){var o=t.getUint16(r,!1);if(r+=2,65505==o){if(1165519206!=t.getUint32(r+=2,!1))return-1;var a=18761==t.getUint16(r+=6,!1);r+=t.getUint32(r+4,a);var i=t.getUint16(r,a);r+=2;for(var u=0;u<i;u++)if(274==t.getUint16(r+12*u,a))return t.getUint16(r+12*u+8,a)}else{if(65280!=(65280&o))break;r+=t.getUint16(r,!1)}}return-1}function i(e,t,n){var r=e.width,o=e.height;switch(n>4&&(e.width=o,e.height=r),n){case 2:t.translate(r,0),t.scale(-1,1);break;case 3:t.translate(r,o),t.rotate(Math.PI);break;case 4:t.translate(0,o),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-o);break;case 7:t.rotate(.5*Math.PI),t.translate(r,-o),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-r,0)}}function u(e,t,u){var s=new FileReader;s.onload=function(s){if(t.compress===!1)return e.base64=s.target.result,void u(e);var f=new Image;f.onload=function(){var s=n(f),l=a(r(f.src)),c=document.createElement("canvas"),d=c.getContext("2d"),p=t.compress.width,h=t.compress.height,v=f.width,y=f.height,g=void 0;if(v<y&&y>h?(v=parseInt(h*f.width/f.height),y=h):v>=y&&v>p&&(y=parseInt(p*f.height/f.width),v=p),c.width=v,c.height=y,l>0&&i(c,d,l),d.drawImage(f,0,0,v,y/s),g=/image\/jpeg/.test(e.type)||/image\/jpg/.test(e.type)?c.toDataURL("image/jpeg",t.compress.quality):c.toDataURL(e.type),"file"==t.type)if(/;base64,null/.test(g)||/;base64,$/.test(g))u(e);else{var m=o(g);m.id=e.id,m.name=e.name,m.lastModified=e.lastModified,m.lastModifiedDate=e.lastModifiedDate,u(m)}else/;base64,null/.test(g)||/;base64,$/.test(g)?(t.onError(e,new Error("Compress fail, dataURL is "+g+".")),u()):(e.base64=g,u(e))},f.src=s.target.result},s.readAsDataURL(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={compress:u},e.exports=t["default"]},function(e,t){"use strict";function n(e){var t=e.url,n=e.file,r=e.fileVal,o=e.onBeforeSend,a=e.onProgress,i=e.onError,u=e.onSuccess,s=e.xhrFields,f=n.name,l=n.type,c=n.lastModifiedDate,d={name:f,type:l,size:"file"==e.type?n.size:n.base64.length,lastModifiedDate:c},p={};if(o(n,d,p)!==!1){n.status="progress",a(n,0);var h=new FormData,v=new XMLHttpRequest;n.xhr=v,Object.keys(d).forEach(function(e){h.append(e,d[e])}),"file"==e.type?h.append(r,n,f):h.append(r,n.base64),v.onreadystatechange=function(){if(4==v.readyState)if(200==v.status)try{var e=JSON.parse(v.responseText);u(n,e)}catch(t){i(n,t)}else i(n,new Error("XMLHttpRequest response status is "+v.status))},v.upload.addEventListener("progress",function(e){if(0!=e.total){var t=100*Math.ceil(e.loaded/e.total);a(n,t)}},!1),v.open("POST",t),Object.keys(s).forEach(function(e){v[e]=s[e]}),Object.keys(p).forEach(function(e){v.setRequestHeader(e,p[e])}),v.send(h)}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]}])});